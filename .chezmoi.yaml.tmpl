{{- $is_work := stat (joinPath .chezmoi.homeDir ".work") -}}
{{- $servers := list
    "apollo"
-}}

# Initialize to false, will overwrite if we are on wsl
{{- $is_wsl := false -}}
{{- if eq .chezmoi.os "linux" }}
{{- if .chezmoi.kernel.osrelease | lower | contains "microsoft" }}
{{- $is_wsl := true -}}
{{- end }}
{{- end }}

data:
{{- if has .chezmoi.hostname $servers }}
    is_server: true
{{- else }}
    is_server: false
{{- end }}

    is_wsl: {{if $is_wsl}}true{{else}}false{{end}}

{{- if $is_work }}
{{- $work_config := include (joinPath .chezmoi.homeDir ".work") | fromYaml }}
    work: true
    codeRoot: "$HOME/stripe"
    email: {{ onepasswordRead "op://Private/Josh Kunz/email" }}
    git:
        host: {{ onepasswordRead "op://Private/Git/host" }}
        maintainanceRepos: {{ $work_config.maintainanceRepos | toYaml | nindent 12 }}
{{- else }}
    work: false
    codeRoot: "$HOME/code"
    email: josh@kunz.xyz
{{- end }}
